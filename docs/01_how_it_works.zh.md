# How it works

buildenv's workspace would be like below, it consists of **buildenv.json**, **conf**, **downloads**, **installed**, **packages** and **script**.

```
├── buildenv.json
├── conf
│   ├── platforms
│   │   ├── aarch64-linux-jetson.json
│   │   ├── aarch64-linux-raspberry.json
│   │   ├── x86_64-linux-20.04.json
│   │   ├── x86_64-linux-22.04.json
│   │   └── x86_64-linux-native.json
│   ├── ports
│   │   ├── ffmpeg
│   │   ├── opencv
│   │   ├── x265
│   │   └── zlib
│   ├── projects
│   │   ├── project_001.json
│   │   ├── project_002.json
│   │   └── project_003.json
│   └── tools
│       ├── cmake-3.30.5-linux-x86_64.json
│       └── nasm-2.16.03.json
├── downloads
│   ├── cmake-3.30.5-linux-x86_64.tar.gz
│   ├── gcc-9.5.0.tar.gz
│   ├── nasm-2.16.03-x86_64-linux.tar.gz
│   ├── ubuntu-base-20.04.5-base-amd64.tar.gz
│   └── tools
│        ├── cmake-3.30.5-linux-x86_64
│        ├── gcc-9.5.0
│        ├── nasm-2.16.03-x86_64-linux
│        └── ubuntu-base-20.04.5-base-amd64
├── installed
│   ├── buildenv
│   │   └── info
│   └── x86_64-linux-20.04-Release
│       ├── bin
│       ├── include
│       ├── lib
│       └── share
├── packages
│   ├── ffmpeg@n3.4.13-x86_64-linux-20.04-Release
│   │   ├── include
│   │   ├── lib
│   │   └── share
│   ├── opencv@3.4.18-x86_64-linux-20.04-Release
│   │   ├── bin
│   │   ├── include
│   │   ├── lib
│   │   └── share
│   ├── x264@stable-x86_64-linux-20.04-Release
│   │   ├── include
│   │   └── lib
│   └── x265@4.0-x86_64-linux-20.04-Release
│       ├── include
│       ├── lib
│       └── share
└─── scripts
    ├── environment
    └── toolchain_file.cmake
```

## Introduction

### 1. buildenv.json

This is buildenv's global config file, `conf repo`, `current platform`, `current project` and `cache_dirs` are defined in it, you can change it by buildenv's cli or text manually.

### 2. conf

All available `platform`, `ports`, `projects` and `tools` are defined here.

- **platform**: This folder contains all available platform configuration files. Each file defines the toolchain, rootfs, and tools.

- **ports**: This folder contains all available third-party port configuration files. Each file defines the third party's repository URL, ref, version, and build step.

- **projects**: This folder contains all available project configuration files. Each file defines third parties, CMake variables, environment variables, and compile options.

- **tools**：This folder contains all available tool configuration files. Each file defines download url or local file url and its runtime dir.

### 3. downloads

Toolchain, rootfs, tools of different platforms would be download in this folder, and would be extracted to tools inside.

### 4. installed

All thirdparty libraries would be built and installed into this folder, and stored in platform-specific subdirectories, such as `x86_64-linux-20.04-Release`.

### 5. packages

This is a transitional directory for third-party library installation, and it is also the directory where third-party library cache packages are retrieved and extracted.

### 6. scripts

In this folder there are two files always, `toolchian_file.cmake` and `environment`, they are all automaticall generated by selecting exact project config. `toolchian_file.cmake` is used to cross-compile your project, and `environment` is used to source in terminal, so that can build other third-party libraries which use uncommon build tools.